# **********************************************************************
#  
#  Very simple Makefile to build StDbLib.so & StDbLib.a
#
#  header file dependencies are extremely dumb -
#  - touch a header file & you rebuild the entire library.
#  but the rebuild is also very quick ~1minute.
#
#  flags & control information reside in file 'rules.make'
#
# **********************************************************************

STDBLIBSO  = StDbLib.so
STDBLIBA   = StDbLib.a
TARGETS	   = $(STDBLIBSO) $(STDBLIBA)  

all:: $(TARGETS)

include rules.make

SRCFILES += $(wildcard *.cc)
HEADERS  += $(wildcard *.h)
HHEADERS += $(wildcard *.hh)
LINK_OBJS := $(subst .cc,.o, $(SRCFILES))

$(STDBLIBSO): $(LINK_OBJS) 
	rm -f $@
	$(CXX) $(SOFLAGS) -o $@ $(LINK_OBJS) $(CLIBS)  $(SHARED_LIBS) 

$(STDBLIBA): $(LINK_OBJS) 
	rm -f $@
	$(AR) $(LDFLAGS) $@ $(LINK_OBJS)  

$(LINK_OBJS): $(HEADERS) $(HHEADERS)

clean::
	rm -f $(TARGETS)
	rm -f $(LINK_OBJS)


#include .depend
# DO NOT DELETE THIS LINE -- make depend depends on it.










