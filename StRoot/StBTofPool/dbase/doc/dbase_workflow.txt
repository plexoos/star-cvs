**** TOF INL/TDIG database workflow ****

* determine timestamp (typically assigned by S&C coordinator at run-start)
* double check the following ingredients:
*  - tray replacements, i.e. geom tray ID has a new tray w/ different SN
*     double check with yearly spreadsheet at
*     http://www.star.bnl.gov/public/tof/electronics/index.html
*     Action: modify the macro
*  - TDIG replacements on TOF trays:  tdig_yyyymmdd.txt extracted 
*     from the TOF database at http://www.rhip.utexas.edu/~tofp/tray
*     Action: request file update, or edit original in case of minor changes
*  - TDIG replacements on VPDs
*     verify VPD pdf file at
*     http://www.star.bnl.gov/public/tof/electronics/index.html
*     Action: modify the macro

root4star -b -l -q macros/storetofTDIGOnTray.C
diff testTDIGMap.dat with earlier version
setenv DB_ACCESS_MODE write
root4star -b -l -q macros/storetofTDIGOnTray.C


**** TOF alignment workflow ****
* determine timestamp (usually only once per run period)
* increment seconds in case of a new version
* update store macro with new location (and recommit to CVS)
root4star -b -l -q 'macros/storetofGeomAlign.C'
root4star -b -l -q 'macros/readtofGeomAlign.C("2011-01-01 00:00:00")'


**** TOF calibration database workflow ****

* determine timestamp
* increment seconds in case of a new version
* point the input soft link to the correct subdirectory

Test/compare/store/read/compare:

root4star -b -l -q storetofTOffset.C
diff TOffset_test.dat input/t0_4DB.dat
setenv DB_ACCESS_MODE write
root4star -b -l -q "storetofTOffset.C(0)"
root4star -b -l -q 'readtofTOffset.C("2009-11-15 00:00:01")'
diff TOffset_read.dat  TOffset_test.dat

double check that corrallgo=0 (VPD) or =1(startless)
root4star -b -q -l storevpdTotCorr.C
diff input/pvpdCali_4DB.dat vpdTotCorr_test.dat
root4star -b -q -l 'storevpdTotCorr.C(0)'
root4star -b -q -l 'readvpdTotCorr.C("2009-11-15 00:00:01")'
diff vpdTotCorr_test.dat vpdTotCorr_read.dat

root4star -b -q -l storetofTotbCorr.C
(this can take long!)
compare input/totCali_4DB.dat  totCorr_test.dat
root4star -b -q -l 'storetofTotbCorr.C(0)'
root4star -b -q -l 'readtofTotbCorr.C("2009-11-15 00:00:01")'
diff totCorr_read.dat totCorr_test.dat

root4star -b -q -l storetofZbCorr.C
(this can take long!)
diff  input/zCali_4DB.dat  zCorr_test.dat
root4star -b -q -l 'storetofZbCorr.C(0)'
root4star -b -q -l 'readtofZbCorr.C("2009-11-15 00:00:01")'
diff zCorr_read.dat zCorr_test.dat




200GeV FF 2009-11-15 00:00:01
200 GeV RFF-1200 (period2) 2010-02-04 19:00:02
200 GeV RFF-2500 (period3) 2010-03-05 22:00:02

