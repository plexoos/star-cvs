HOWTO Generate EEMC Timing Curve Plots				03/29/2007
--------------------------------------------------------------------------

If you're reading this, you must be interested in making timing curves for
the endcap.  This file will tell you how to do it.

0. Log into rcas...

And setup a working directory and cd into it

$ mkdir timimg
$ cd timing

You'll need about 22MB / run to store the output files.

1. The Data

You should have a list of runs, each of which has a relative TCD phase delay.
If you don't have this, wait for beam, go comandeer the RTS system and take
your data!  Once the daq files have migrated to HPSS, we'll need to get them
converted to MuDst's.  You can either check them out of HPSS and do it 
yourself, or get Jan to request a fast offline production of the data.

The MuDst's should show up on /star/data09/reco/ (or whatever the current
directory for fast offline is).  Once this happens, create a file list
for every run you generated.  e.g.

$ ls /star/data09/reco/EEMCtcdScan/FullField/dev/2007/081/8081035/ > 8081035.list

The name and location  of the file is important -- <run number>.list in your
working directory.  Don't prefix it with an "R", and don't put it in a 
subdirectory.

2. Creating the timing files

Start by checking out the macros and scripts which will drive the analysis.
From an rcas terminal type

$ cvs co StRoot/StEEmcPool/StEEmcTimingMaker/macros
$ ln -s StRoot/StEEmcPool/StEEmcTimingMaker/macros/* .

There should be a perl script called makeTimingFiles.pl.  Edit the file
and put a comma-separated list of runs in the @runs array.  Put the
corresponding tower and mapmt TCD phases in @tower_delays and @mapmt_delays.
Set the number of events you want to analysis ($nevents) and run the code.

Now run the script and wait for the batch jobs to complete.

3. Creating the timing plots

$ ls *.log
$ ls timing_files/*.root

You should see a root file for each of the runs you analysed.  If not,
consult the corresponding logfile and try to figure out why your job
died.

$ root4star
root.exe [0] .x plotEEmcTimimg.C

To save the plots to a gif (integrated) or jpeg (channel-wise), type
root.exe [1] doprint = true;

Then 
root.exe [2] drawCrates();

to redraw the timing curves integrated over all channels.  To draw
timing curves for each individual channel, you can call

root.exe [3] towerChannels(0) ; // 0-5 for crates 1-6
root.exe [4] mapmtChannels(0) ; // 0-47 for crates 1-48

The first time through, you won't want to have printing enabled. 

