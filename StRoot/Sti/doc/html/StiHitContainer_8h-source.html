<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>StiHitContainer.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>StiHitContainer.h</h1><a href="StiHitContainer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//StiHitContainer.h</font>
00002 <font class="comment">//M.L. Miller (Yale Software)</font>
00003 <font class="comment">//03/01</font>
00004 
00005 <font class="comment">// Container of StiHit pointers.</font>
00006 <font class="comment">// Container is a map (not multimap) keyed by struct, containing vector of</font>
00007 <font class="comment">// hits.</font>
00008 <font class="comment">// Search region is +-deltaD() in distance along pad, and +-deltaZ() in z</font>
00009 
00010 <font class="preprocessor">#ifndef StiHitContainer_HH</font>
00011 <font class="preprocessor">#define StiHitContainer_HH</font>
00012 
00013 <font class="preprocessor">#include &lt;vector&gt;</font>
00014 <font class="preprocessor">#include &lt;map&gt;</font>
00015 <font class="preprocessor">#include &lt;time.h&gt;</font>
00016 <font class="preprocessor">#include &lt;iostream.h&gt;</font>
00017 <font class="preprocessor">#include &lt;fstream.h&gt;</font>
00018 
00019 <font class="preprocessor">#include "<a class="code" href="StiMapUtilities_8h.html">StiMapUtilities.h</a>"</font>
00020 <font class="preprocessor">#include "<a class="code" href="StiHit_8h.html">StiHit.h</a>"</font>
00021 
00022 <font class="keyword">using</font> std::map;
00023 <font class="keyword">using</font> std::vector;
00024 
00025 <font class="keyword">class </font><a class="code" href="classStiHit.html">StiHit</a>;
00026 
<a name="l00027"></a><a class="code" href="StiHitContainer_8h.html#a0">00027</a> <font class="keyword">typedef</font> vector&lt;StiHit*&gt; <a class="code" href="StiHitContainer_8h.html#a0">hitvector</a>;
<a name="l00028"></a><a class="code" href="StiHitContainer_8h.html#a1">00028</a> <font class="keyword">typedef</font> map&lt;HitMapKey, hitvector, MapKeyLessThan&gt; <a class="code" href="StiHitContainer_8h.html#a1">hitmap</a>;
<a name="l00029"></a><a class="code" href="StiHitContainer_8h.html#a2">00029</a> <font class="keyword">typedef</font> hitmap::value_type <a class="code" href="StiHitContainer_8h.html#a2">hitMapValType</a>;
00030 
<a name="l00031"></a><a class="code" href="classStiHitContainer.html">00031</a> <font class="keyword">class </font><a class="code" href="classStiHitContainer.html">StiHitContainer</a>
00032 {
00033 <font class="keyword">public</font>:
<a name="l00034"></a><a class="code" href="classStiHitContainer.html#l0">00034</a>     <font class="keyword">friend</font> <font class="keyword">class </font>nobody;
00035     
00036     <font class="comment">//Singleton access</font>
00037     <font class="keyword">static</font> <a class="code" href="classStiHitContainer.html">StiHitContainer</a>* <a class="code" href="classStiHitContainer.html#d0">instance</a>(<font class="keywordtype">bool</font> drawable=<font class="keyword">false</font>); <font class="comment">//first call to instance set's type!</font>
00038     <font class="keyword">static</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#d1">kill</a>();
00039     
00040     <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a0">setDeltaD</a>(<font class="keywordtype">double</font>);
00041     <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a1">setDeltaZ</a>(<font class="keywordtype">double</font>);
00042 
00043     <font class="keywordtype">double</font> <a class="code" href="classStiHitContainer.html#a2">deltaD</a>() <font class="keyword">const</font>;
00044     <font class="keywordtype">double</font> <a class="code" href="classStiHitContainer.html#a3">deltaZ</a>() <font class="keyword">const</font>;
00045 
00046     <font class="comment">//Provide for drawable derived class(es?)</font>
00047     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a4">update</a>();
00048     
00049     <font class="comment">//STL wrappers</font>
00050     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a5">push_back</a>(<a class="code" href="classStiHit.html">StiHit</a>*);
00051     <font class="keyword">virtual</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="classStiHitContainer.html#a6">size</a>() <font class="keyword">const</font>;
00052     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a7">clear</a>();
00053     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a8">clearAndDestroy</a>();
00054     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a9">sortHits</a>();
00055 
00056     <font class="comment">//Gets</font>
00057     <font class="keyword">const</font> <a class="code" href="StiHitContainer_8h.html#a0">hitvector</a>&amp; <a class="code" href="classStiHitContainer.html#a11">hits</a>(<font class="keywordtype">double</font> refangle, <font class="keywordtype">double</font> position);
00058     <font class="keyword">const</font> <a class="code" href="StiHitContainer_8h.html#a1">hitmap</a>&amp; <a class="code" href="classStiHitContainer.html#a11">hits</a>() <font class="keyword">const</font>;
00059     
00060     <font class="comment">//User Query Interface</font>
00061     <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a12">setRefPoint</a>(<a class="code" href="classStiHit.html">StiHit</a>* ref);
00062     <font class="comment">//position- postion of detector, not x of hit.</font>
00063     <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a12">setRefPoint</a>(<font class="keywordtype">double</font> position, <font class="keywordtype">double</font> refAngle, <font class="keywordtype">double</font> y, <font class="keywordtype">double</font> z);
00064     <font class="keywordtype">bool</font> <a class="code" href="classStiHitContainer.html#a14">hasMore</a>() <font class="keyword">const</font>;
00065     <a class="code" href="classStiHit.html">StiHit</a>* <a class="code" href="classStiHitContainer.html#a15">getCurrentHit</a>(); <font class="comment">//get current</font>
00066     <a class="code" href="classStiHit.html">StiHit</a>* <a class="code" href="classStiHitContainer.html#a16">getHit</a>();  <font class="comment">//get current hit and increment</font>
00067 
00068     <font class="comment">//Add vertex information</font>
00069     <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a17">addVertex</a>(<a class="code" href="classStiHit.html">StiHit</a>*); <font class="comment">//push_back</font>
00070     <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="classStiHitContainer.html#a18">numberOfVertices</a>() <font class="keyword">const</font>;
00071     <font class="keyword">const</font> <a class="code" href="StiHitContainer_8h.html#a0">hitvector</a>&amp; <a class="code" href="classStiHitContainer.html#a19">vertices</a>() <font class="keyword">const</font>;
00072     
00073 <font class="keyword">protected</font>:
00074     <a class="code" href="classStiHitContainer.html#b0">StiHitContainer</a>();
00075     <font class="keyword">virtual</font> <a class="code" href="classStiHitContainer.html#b1">~StiHitContainer</a>();
00076 
00077 <font class="keyword">private</font>:
00078     <font class="comment">//Vertex implementation</font>
00079     <a class="code" href="StiHitContainer_8h.html#a0">hitvector</a> mvertexvec; 
00080 
00081 <font class="keyword">private</font>:
00082     <font class="keyword">static</font> <a class="code" href="classStiHitContainer.html">StiHitContainer</a>* sinstance;
00083     <font class="keyword">friend</font> ostream&amp; <a class="code" href="classStiHitContainer.html#l1">operator&lt;&lt;</a>(ostream&amp;, <font class="keyword">const</font> <a class="code" href="classStiHitContainer.html">StiHitContainer</a>&amp;);
00084     
00085     <a class="code" href="structHitMapKey.html">HitMapKey</a> mkey; <font class="comment">//store a map key member to avoid constructor call per hit</font>
00086 
00087     <font class="keywordtype">double</font> mdeltad; <font class="comment">//Search limit in local d-direction</font>
00088     <font class="keywordtype">double</font> mdeltaz; <font class="comment">//Search limit in local z-direction</font>
00089 
00090     <font class="comment">//Used to search for points that satisfy users query</font>
00091     <a class="code" href="classStiHit.html">StiHit</a>* mminpoint;
00092     <a class="code" href="classStiHit.html">StiHit</a>* mmaxpoint;
00093     <a class="code" href="classStiHit.html">StiHit</a> mUtilityHit;
00094     hitvector::iterator mstart;
00095     hitvector::iterator mstop;
00096 
00097     <font class="comment">//Used to return points that satisfy users query</font>
00098     hitvector::const_iterator mcurrent;
00099     <a class="code" href="StiHitContainer_8h.html#a0">hitvector</a> mcandidatevec; 
00100     
00101     <a class="code" href="StiHitContainer_8h.html#a1">hitmap</a> mmap; 
00102 };
00103 
00104 <font class="comment">//inlines</font>
00105 
<a name="l00106"></a><a class="code" href="classStiHitContainer.html#a11">00106</a> <font class="keyword">inline</font> <font class="keyword">const</font> <a class="code" href="StiHitContainer_8h.html#a1">hitmap</a>&amp; <a class="code" href="classStiHitContainer.html#a11">StiHitContainer::hits</a>()<font class="keyword"> const </font>
00107 {
00108     <font class="keywordflow">return</font> mmap;
00109 }
00110 
<a name="l00111"></a><a class="code" href="classStiHitContainer.html#a0">00111</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a0">StiHitContainer::setDeltaD</a>(<font class="keywordtype">double</font> val)<font class="keyword"> </font>
00112 {
00113     mdeltad = val;
00114 }
00115 
<a name="l00116"></a><a class="code" href="classStiHitContainer.html#a1">00116</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a1">StiHitContainer::setDeltaZ</a>(<font class="keywordtype">double</font> val)<font class="keyword"> </font>
00117 {
00118     mdeltaz = val;
00119 }
00120 
<a name="l00121"></a><a class="code" href="classStiHitContainer.html#a2">00121</a> <font class="keyword">inline</font> <font class="keywordtype">double</font> <a class="code" href="classStiHitContainer.html#a2">StiHitContainer::deltaD</a>()<font class="keyword"> const </font>
00122 {
00123     <font class="keywordflow">return</font> mdeltad;
00124 }
00125 
<a name="l00126"></a><a class="code" href="classStiHitContainer.html#a3">00126</a> <font class="keyword">inline</font> <font class="keywordtype">double</font> <a class="code" href="classStiHitContainer.html#a3">StiHitContainer::deltaZ</a>()<font class="keyword"> const </font>
00127 {
00128     <font class="keywordflow">return</font> mdeltaz;
00129 }
00130 
<a name="l00131"></a><a class="code" href="classStiHitContainer.html#a14">00131</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classStiHitContainer.html#a14">StiHitContainer::hasMore</a>()<font class="keyword"> const</font>
00132 {
00133     <font class="keywordflow">return</font> (mcurrent!=mcandidatevec.end()) ? <font class="keyword">true</font> : <font class="keyword">false</font>;
00134 }
00135 
00136 <font class="comment">//Return without incrementing</font>
<a name="l00137"></a><a class="code" href="classStiHitContainer.html#a15">00137</a> <font class="keyword">inline</font> <a class="code" href="classStiHit.html">StiHit</a>* <a class="code" href="classStiHitContainer.html#a15">StiHitContainer::getCurrentHit</a>()<font class="keyword"></font>
00138 {
00139     <font class="keywordflow">return</font> (*mcurrent);
00140 }
00141 
00142 <font class="comment">//Return and increment</font>
<a name="l00143"></a><a class="code" href="classStiHitContainer.html#a16">00143</a> <font class="keyword">inline</font> <a class="code" href="classStiHit.html">StiHit</a>* <a class="code" href="classStiHitContainer.html#a16">StiHitContainer::getHit</a>()<font class="keyword"></font>
00144 {
00145     <font class="keywordflow">return</font> (*(mcurrent++));
00146 }
00147 
00148 <font class="comment">//vertex inlines</font>
00149 
<a name="l00150"></a><a class="code" href="classStiHitContainer.html#a17">00150</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classStiHitContainer.html#a17">StiHitContainer::addVertex</a>(<a class="code" href="classStiHit.html">StiHit</a>* val)<font class="keyword"></font>
00151 {
00152     mvertexvec.push_back(val);
00153 }
00154 
<a name="l00155"></a><a class="code" href="classStiHitContainer.html#a18">00155</a> <font class="keyword">inline</font> <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> <a class="code" href="classStiHitContainer.html#a18">StiHitContainer::numberOfVertices</a>()<font class="keyword"> const</font>
00156 {
00157     <font class="keywordflow">return</font> mvertexvec.size();
00158 }
00159 
<a name="l00160"></a><a class="code" href="classStiHitContainer.html#a19">00160</a> <font class="keyword">inline</font> <font class="keyword">const</font> <a class="code" href="StiHitContainer_8h.html#a0">hitvector</a>&amp; <a class="code" href="classStiHitContainer.html#a19">StiHitContainer::vertices</a>()<font class="keyword"> const</font>
00161 {
00162     <font class="keywordflow">return</font> mvertexvec;
00163 }
00164 
00165 <font class="comment">// Non -memebers</font>
00166 
00167 ostream&amp; <a class="code" href="StiMaker_8cxx.html#a0">operator&lt;&lt;</a>(ostream&amp;, <font class="keyword">const</font> <a class="code" href="StiHitContainer_8h.html#a0">hitvector</a>&amp;);
00168 
00169 ostream&amp; <a class="code" href="StiMaker_8cxx.html#a0">operator&lt;&lt;</a>(ostream&amp;, <font class="keyword">const</font> <a class="code" href="classStiHitContainer.html">StiHitContainer</a>&amp;);
00170 
00171 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Fri Oct 5 13:24:32 2001 for ITTF by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
