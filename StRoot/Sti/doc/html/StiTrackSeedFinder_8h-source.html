<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>StiTrackSeedFinder.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.11 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>StiTrackSeedFinder.h</h1><a href="StiTrackSeedFinder_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//StiTrackSeedFinder.h</font>
00002 <font class="comment">//M.L. Miller (Yale Software)</font>
00003 <font class="comment">//03/01</font>
00004 
00005 <font class="comment">//Abstract base class for track seed finding for the tracker</font>
00006 
00007 <font class="preprocessor">#ifndef StiTrackSeedFinder_HH</font>
00008 <font class="preprocessor">#define StiTrackSeedFinder_HH</font>
00009 
00010 <font class="preprocessor">#include &lt;vector&gt;</font>
00011 <font class="preprocessor">#include "<a class="code" href="StiSeedFinder_8h.html">StiSeedFinder.h</a>"</font>
00012 
00013 <font class="preprocessor">#include "<a class="code" href="StiHit_8h.html">StiHit.h</a>"</font>
00014 <font class="preprocessor">#include "<a class="code" href="StiHitContainer_8h.html">StiHitContainer.h</a>"</font> <font class="comment">//Include temp., so that we can use typedefs</font>
00015 <font class="preprocessor">#include "<a class="code" href="StiKalmanTrack_8h.html">StiKalmanTrack.h</a>"</font>
00016 <font class="preprocessor">#include "<a class="code" href="CombinationIterator_8h.html">CombinationIterator.h</a>"</font>
00017 
00018 <font class="keyword">class </font><a class="code" href="classStiRootDrawableHits.html">StiRootDrawableHits</a>;
00019 <font class="keyword">class </font>StTrack;
00020 <font class="keyword">class </font><a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>;
00021 
<a name="l00022"></a><a class="code" href="classStiTrackSeedFinder.html">00022</a> <font class="keyword">class </font><a class="code" href="classStiTrackSeedFinder.html">StiTrackSeedFinder</a> : <font class="keyword">public</font> <a class="code" href="classStiSeedFinder.html">StiSeedFinder</a>
00023 {
00024     <font class="keyword">typedef</font> <a class="code" href="classCombinationIterator.html">CombinationIterator&lt;StiHit*&gt;</a> <a class="code" href="classCombinationIterator.html">combo_iterator</a>;
00025     <font class="keyword">typedef</font> combo_iterator::tvector tvector;
00026 
00027 <font class="keyword">public</font>:
00028 
00029     <a class="code" href="classStiTrackSeedFinder.html#a0">StiTrackSeedFinder</a>(<a class="code" href="classStiHitContainer.html">StiHitContainer</a>*, <a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>*);
00030     <a class="code" href="classStiTrackSeedFinder.html#a0">StiTrackSeedFinder</a>(<font class="keyword">const</font> <a class="code" href="classStiTrackSeedFinder.html">StiTrackSeedFinder</a>&amp;);
00031     <a class="code" href="classStiTrackSeedFinder.html">StiTrackSeedFinder</a>&amp; <a class="code" href="classStiTrackSeedFinder.html#a2">operator=</a>(<font class="keyword">const</font> <a class="code" href="classStiTrackSeedFinder.html">StiTrackSeedFinder</a>&amp;);
00032     
00033     <font class="keyword">virtual</font> <a class="code" href="classStiTrackSeedFinder.html#a3">~StiTrackSeedFinder</a>();
00034 
00035     <font class="comment">//Set Hit Combination filter type</font>
00036     <font class="keywordtype">void</font> <a class="code" href="classStiTrackSeedFinder.html#a4">setHitComboFilter</a>(<a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>* val);
00037     <font class="keyword">const</font> <a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>* <a class="code" href="classStiTrackSeedFinder.html#a5">getHitComboFilter</a>() <font class="keyword">const</font>;
00038     
00039     <font class="comment">//SetFactory</font>
00040     <font class="keywordtype">void</font> <a class="code" href="classStiTrackSeedFinder.html#a6">setFactory</a>(<a class="code" href="classStiObjectFactoryInterface.html">StiObjectFactoryInterface&lt;StiKalmanTrack&gt;</a>* val);
00041     
00042     <font class="comment">//Enforced User interface</font>
00043     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="classStiSeedFinder.html#a2">hasMore</a>();
00044     <font class="keyword">virtual</font> <a class="code" href="classStiKalmanTrack.html">StiKalmanTrack</a>* <a class="code" href="classStiSeedFinder.html#a3">next</a>();
00045     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiSeedFinder.html#a4">build</a>();
00046     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiSeedFinder.html#a5">reset</a>();
00047     
00048     <font class="keywordtype">void</font> <a class="code" href="classStiTrackSeedFinder.html#a11">addLayer</a>(<font class="keywordtype">double</font> refangle, <font class="keywordtype">double</font> position);
00049     
00050     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiTrackSeedFinder.html#a12">print</a>() <font class="keyword">const</font>; <font class="comment">//Print contents of iterator</font>
00051     <font class="keywordtype">int</font> <a class="code" href="classStiTrackSeedFinder.html#a13">numberOfLayers</a>() <font class="keyword">const</font>;
00052     
00053 <font class="keyword">protected</font>:
00054     <font class="keywordtype">void</font> <a class="code" href="classStiTrackSeedFinder.html#b0">copyToThis</a>(<font class="keyword">const</font> <a class="code" href="classStiTrackSeedFinder.html">StiTrackSeedFinder</a>&amp;); <font class="comment">//deep copy</font>
00055     <font class="keyword">virtual</font> <a class="code" href="classStiKalmanTrack.html">StiKalmanTrack</a>* <a class="code" href="classStiTrackSeedFinder.html#b1">makeTrack</a>(<font class="keyword">const</font> tvector&amp;) <font class="keyword">const</font>;
00056 
00057 <font class="keyword">protected</font>:
00058     <font class="comment">//Shallow members</font>
<a name="l00059"></a><a class="code" href="classStiTrackSeedFinder.html#n0">00059</a>     <a class="code" href="classStiHitContainer.html">StiHitContainer</a>* mhitstore;
<a name="l00060"></a><a class="code" href="classStiTrackSeedFinder.html#n1">00060</a>     <a class="code" href="classCombinationIterator.html">combo_iterator</a> miterator;
<a name="l00061"></a><a class="code" href="classStiTrackSeedFinder.html#n2">00061</a>     <a class="code" href="classStiObjectFactoryInterface.html">StiObjectFactoryInterface&lt;StiKalmanTrack&gt;</a>* mtrackfactory;
<a name="l00062"></a><a class="code" href="classStiTrackSeedFinder.html#n3">00062</a>     <font class="keywordtype">int</font> mnlayers;
<a name="l00063"></a><a class="code" href="classStiTrackSeedFinder.html#n4">00063</a>     <a class="code" href="classStiRootDrawableHits.html">StiRootDrawableHits</a>* mdrawablehits;
<a name="l00064"></a><a class="code" href="classStiTrackSeedFinder.html#n5">00064</a>     <a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>* mhitcombofilter;
00065 
00066 };
00067 
00068 <font class="comment">// Non members ---</font>
00069 
00070 <font class="comment">//Helper class to filter combinations of StiHits</font>
<a name="l00071"></a><a class="code" href="structSti2HitComboFilter.html">00071</a> <font class="keyword">struct</font> <a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>
00072 {
00073     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <font class="keyword">operator</font>()(<font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>*, <font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>*) <font class="keyword">const</font> = 0;
00074     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiSeedFinder.html#a4">build</a>(<font class="keyword">const</font> string&amp; val=<font class="stringliteral">"empty"</font>)=0;
00075 };
00076 
00077 <font class="comment">//This is a simple test for rectangular distance in 2 dimensions</font>
<a name="l00078"></a><a class="code" href="structStiRectangular2HitComboFilter.html">00078</a> <font class="keyword">struct</font> <a class="code" href="structStiRectangular2HitComboFilter.html">StiRectangular2HitComboFilter</a> : <font class="keyword">public</font> <a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>
00079 {
<a name="l00080"></a><a class="code" href="structStiRectangular2HitComboFilter.html#a0">00080</a>     StiRectangular2HitComboFilter() :  deltaD(-1), deltaZ(-1) {};
00081     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> operator()(<font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>*, <font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>*) <font class="keyword">const</font>;
00082     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="classStiSeedFinder.html#a4">build</a>(<font class="keyword">const</font> string&amp;);
<a name="l00083"></a><a class="code" href="structStiRectangular2HitComboFilter.html#m0">00083</a>     <font class="keywordtype">double</font> deltaD;
<a name="l00084"></a><a class="code" href="structStiRectangular2HitComboFilter.html#m1">00084</a>     <font class="keywordtype">double</font> deltaZ;
00085 };
00086 
<a name="l00087"></a><a class="code" href="structStiCollinear2HitComboFilter.html">00087</a> <font class="keyword">struct </font><a class="code" href="structStiCollinear2HitComboFilter.html">StiCollinear2HitComboFilter</a> : <font class="keyword">public</font> <a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>
00088 {
<a name="l00089"></a><a class="code" href="structStiCollinear2HitComboFilter.html#a0">00089</a>     <a class="code" href="structStiCollinear2HitComboFilter.html#a0">StiCollinear2HitComboFilter</a>() : deltaPhi(-1.), deltaTheta(-1.) {};
00090     <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="structSti2HitComboFilter.html#a0">operator()</a>(<font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>*, <font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>*) <font class="keyword">const</font>;
00091     <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="structSti2HitComboFilter.html#a1">build</a>(<font class="keyword">const</font> string&amp;);
<a name="l00092"></a><a class="code" href="structStiCollinear2HitComboFilter.html#m0">00092</a>     <font class="keywordtype">double</font> deltaPhi;
<a name="l00093"></a><a class="code" href="structStiCollinear2HitComboFilter.html#m1">00093</a>     <font class="keywordtype">double</font> deltaTheta;
00094 };
00095 <font class="comment">//inlines</font>
00096 
00097 
<a name="l00098"></a><a class="code" href="structStiRectangular2HitComboFilter.html#a1">00098</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="structStiRectangular2HitComboFilter.html#a1">StiRectangular2HitComboFilter::operator()</a>(<font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>* lhs, <font class="keyword">const</font> <a class="code" href="classStiHit.html">StiHit</a>* rhs)<font class="keyword"> const</font>
00099 {
00100     <font class="keywordflow">return</font> ( (fabs(lhs-&gt;<a class="code" href="classStiHit.html#a4">y</a>()-rhs-&gt;<a class="code" href="classStiHit.html#a4">y</a>())&lt;=deltaD) &amp;&amp; (fabs(lhs-&gt;<a class="code" href="classStiHit.html#a5">z</a>()-rhs-&gt;<a class="code" href="classStiHit.html#a5">z</a>())&lt;deltaZ));
00101 }
00102 
<a name="l00103"></a><a class="code" href="classStiTrackSeedFinder.html#a4">00103</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classStiTrackSeedFinder.html#a4">StiTrackSeedFinder::setHitComboFilter</a>(<a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>* val)<font class="keyword"></font>
00104 {
00105     mhitcombofilter = val;
00106 }
00107 
<a name="l00108"></a><a class="code" href="classStiTrackSeedFinder.html#a5">00108</a> <font class="keyword">inline</font> <font class="keyword">const</font> <a class="code" href="structSti2HitComboFilter.html">Sti2HitComboFilter</a>* <a class="code" href="classStiTrackSeedFinder.html#a5">StiTrackSeedFinder::getHitComboFilter</a>()<font class="keyword"> const</font>
00109 {
00110     <font class="keywordflow">return</font> mhitcombofilter;
00111 }
00112 
<a name="l00113"></a><a class="code" href="classStiTrackSeedFinder.html#a6">00113</a> <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classStiTrackSeedFinder.html#a6">StiTrackSeedFinder::setFactory</a>(<a class="code" href="classStiObjectFactoryInterface.html">StiObjectFactoryInterface&lt;StiKalmanTrack&gt;</a>* val)<font class="keyword"></font>
00114 {
00115     mtrackfactory=val;
00116 }
00117 
00118 <font class="preprocessor">#endif</font>
</pre></div><hr><address><small>Generated on Fri Oct 5 13:24:33 2001 for ITTF by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.11 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
