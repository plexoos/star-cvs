<body TEXT="#00004A" BGCOLOR="#FFFFFF" LINK="#088D00"
VLINK="#088888" ALINK="#08DEB5" TYPE="FADEIN">
<html>
<head><title>FTPC Offline Database macros</title></head>
<body bgcolor=white>


<!-- make some space using <pre>-tag   -->
<pre>



<h1><center>  Ftpc  Offline Database macros </center></h1>

<h2>

Use the following macros to add new FTPC calibration values to the Calibrations_ftpc offline database.

Db_PrintTable.C

         prints out the contents of the specified table for the specified timestamp

Db_ReadTable.C

        Use this macro to read an FTPC table for a specified time from the Calibrations_ftpc database and 
        write it out into your working directory

        Don't forget to first
                                setenv DB_ACCESS_MODE read

        For example:
                                root4star -b -q 'Db_ReadTable.C("ftpcGas","2008-05-01 00:00:00")'
        
                 will create an ftpcGas.C file in your working directory. This file will contain the 
                 Calibrations_ftpc/ftpcGas table values which are valid for 2008-05-01 00:00:00, the 
                 selected timestamp.

Db_LoadTable.C

         With this macro, you can load the ftpcGas.C file with new values into the database for the beginTime 
         you specify.
         
         Don't forget to first
                               setenv DB_ACCESS_MODE write

         For example:
                               root4star -b -q 'Db_LoadTable.C("ftpcGas","2008-05-01 00:00:00")'
                          
Db_ReadDriftMaps.C

          Use this macro to read the FTPC drift map tables 
                        (ftpcDeflection,ftpcVDrift,ftpcdDeflectiondP,ftpcdVDriftdP)
          from the Calibrations_ftpc database and to write them out into the directory dirname

          The FTPC drift map tables are "flavored" tables
          Before running this macro, create a sub-directory in your working directory for each of the 5 flavors:
          flavor                 sub-directory 
          ------                 ------------- 
          ffp10kv               FullFieldPositive
          hfp10kv               HalfFieldPositive
          zf10kv                ZeroField
          hfn10kv               HalfFieldNegative
          ffn10kv               FullFieldNegative

          Don't forget to
   
                               setenv DB_ACCESS_MODE read

          To dump the complete set of drift maps for a  specific timestamp run the following 5 jobs.
          The timestamp in this example is for the 50% Ar,50% CO2 drift maps
          The timestamp for the 50.3% Ar, 49.7% CO2 drift maps is "2005-11-01 00:00:00":
   
                          root4star -b -q 'Db_ReadDriftMaps.C("FullFieldPositive","2001-11-04 00:00:00","ffp10kv")'
                          root4star -b -q 'Db_ReadDriftMaps.C("HalfFieldPositive","2001-11-04 00:00:00","hfp10kv")'
                          root4star -b -q 'Db_ReadDriftMaps.C("ZeroFieldPositive","2001-11-04 00:00:00","zf10kv")'
                          root4star -b -q 'Db_ReadDriftMaps.C("HalfFieldNegative","2001-11-04 00:00:00","hfn10kv")'
                          root4star -b -q 'Db_ReadDriftMaps.C("FullFieldNegative","2001-11-04 00:00:00","ffn10kv")'


Db_LoadDriftMaps.C 

          Use this macro to load the 5 sets ofthe 4  FTPC "flavored" drift map tables 
                          (ftpcDeflection,ftpcVDrift,ftpcdDeflectiondP,ftpcdVDriftdP)
          to the Calibrations_ftpc database

          There should be 5 sub-directories in your working directory, one for each of the 5 flavors.
          The drift map tables are produced by the StFtpcDriftMapMaker
                flavor                 sub-directory
                ------                 -------------
                ffp10kv               FullFieldPositive
                hfp10kv               HalfFieldPositive
                zf10kv                ZeroField
                hfn10kv               HalfFieldNegative
                ffn10kv               FullFieldNegative

          Don't forget to

                                setenv DB_ACCESS_MODE write

          To load the complete set of drift maps for a  specific timestamp run the following 5 jobs.
          The timestamp in this example is for the 50% Ar,50% CO2 drift maps which should be
          used again starting with the 2007/2008 dAu run
          The timestamp used here is "2007-11-01 00:00:00"

                      root4star -b -q 'Db_LoadDriftMaps.C("FullFieldPositive","2007-11-01 00:00:00","ffp10kv")'
                      root4star -b -q 'Db_LoadDriftMaps.C("HalfFieldPositive","2007-11-01 00:00:00","hfp10kv")'
                      root4star -b -q 'Db_LoadDriftMaps.C("ZeroFieldPositive","2007-11-01 00:00:00","zf10kv")'
                      root4star -b -q 'Db_LoadDriftMaps.C("HalfFieldNegative","2007-11-01 00:00:00","hfn10kv")'
                      root4star -b -q 'Db_LoadDriftMaps.C("FullFieldNegative","2007-11-01 00:00:00","ffn10kv")'

</h2>
</pre>

<p> 
<i> This page was created by  Janet Seyboth</a> on May 2, 2008 </i><br>

</html>
