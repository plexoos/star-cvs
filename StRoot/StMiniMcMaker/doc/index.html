<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>StMiniMcMaker</title>
  </head>

  <body bgcolor="#ffffff" text="#000000">
    <table border="0" width ="100%" cellpadding="10">
      <tr bgcolor="darkblue">
	<td align="center" valign="top">
	  <h1><font color="lightgreen">StMiniMcMaker</h1>
	</td>
    </table>

    <h2> Purpose of StMiniMcMaker </h2>
    <p>
      StMiniMcMaker is meant to be a package that fills the classes in StMiniMcEvent.  These are classes to store
      basic information about the simulated and reconstructed tracks for both embedding and fully simulated events (e.g.
      Hijing + GEANT + TRS).  The trees in the output file are then used to make the histograms needed for efficiencies.
      There are two main advantages to storing the pairwise information.  First, when revisiting an efficiency calculation
      with various sets of cuts (e.g. fit Points >=10 vs. fit Points >= 25), one does not need to run StMcEvent, StEvent, and
      StAssociationMaker again, but one simply uses the Trees and changes a cut to make a plot.  Second, once the track
      association is done, the geant.root files and the event.root files need not remain on disk.  This is of special importance
      as these files have the TPC hits in them, and take up a lot of disk space.  One can therefore reduce the needed disk space
      for the same amount of statistics using these trees.

    <p>
      Since several people have made the request for having a mini dst for the Embedding and Simulation data, it is hoped that
      this package will be useful to people.  This has already been used for the h- paper and for the high-pt paper.  The
      algorithms to calculate efficiencies, backgrounds, acceptance, etc. have been incorporated from the code that has
      already been used for the pion, kaon and proton analyses in the spectra group.
      
    <p>
      The macros that are used to run StMiniMcMaker are in the StMiniMcMaker directory: StMiniEmbed.C and StMiniHijing.C.  The
      perl script submit.pl, also in the StMiniMcMaker directory is used to submit jobs.  Since most of the embedding data
      can be found in PDSF, this script is designed to work in the PDSF LSF queue, with some options like the data vault
      resource usage specification.  Running the script without any arguments returns with a screen output detailing the
      usage and options.  Please look at the macros for more information, should be straightforward.
    <p>
    <h2> Contents of the Tree </h2>
      As usual, the tree has eventwise information at the top level, and several branches for each event.  First of all,
    we save all the thrown Monte Carlo tracks in their own trackwise branch.  This guarantees all the original MC information
    is available.  The other branches are pairwise, each entry representing a pair of tracks: one MC and one Reconstructed.
    For the reconstructed tracks, important information like the global track parameters, the primary track parameters (if
    available) the nubmer of fit points, etc. is stored.  For the monte carlo tracks, the GEANT ID, four momentum,
    number of MC tpc hits, etc. is stored.  In addition, some pairwise information, e.g. the number of common hits between the
    tracks found by the association maker, is also stored.  There are several pairwise branches which are used for
    different purposes:
    <ul>
      <li>Matched Pairs
      <li>Merged Pairs
      <li>Split pairs
      <li>Contamination pairs (weak decay products, secondary tracks)
      <li>Ghost tracks
    </ul>
    <p>
      The information in the Matched Pairs branch is the one used to extract the reconstruction efficiency, when comparing
      the matched tracks to the accepted tracks.  We normally define accepted tracks directly from the MC track branch
      as the ratio of the tracks with 10 or more TPC hits to all tracks, and we define efficiency as the ratio of the
      MC tracks that were matched (where we test the reconstructed matched track for the quality cuts we're interested in,
      for example fit points&ge;23 and global DCA&lt;1 cm) to the accepted tracks.
    <p>
      With this information, all the corrections needed to produce corrected spectra should be readily obtained without
      the need to rerun the association maker every time, and saving the disk space used by the hits in the geant.root and
      event.root files.
    <hr>
    <address><a href="mailto:calderon@star.physics.yale.edu">Manuel Calderon de la Barca Sanchez</a></address>
<!-- Created: Fri May 17 14:57:20 EDT 2002 -->
<!-- hhmts start -->
Last modified: Wed Jun  5 12:01:43 EDT 2002
<!-- hhmts end -->
  </body>
</html>
