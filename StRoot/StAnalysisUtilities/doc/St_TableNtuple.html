<html>
<title>St_TableNtuple</title>
<pre>

//////////////////////////////////////////////////////////////////////////
//                                                                      //
// St_TableNtuple                                                       //
//                                                                      //
// St_TableNtuple is a class to convert STAR Tables into ntuples.       //
// The class inherits from TTree, so it can be used just as a           //
// TTree would (Draw(), etc.). Columns are not made for table           //
// entries which are not basic numerical entities. Table entries        //
// which are arrays are spread into multiple columns with names         //
// given by the entry and index (e.g. chisq[3] => chisq0, chisq1,       //
// and chisq2). The class constructor defines the TTree and its         //
// TBranches. You must use the Fill() member function to fill the       //
// TTree from a table.                                                  //
//                                                                      //
//////////////////////////////////////////////////////////////////////////

Basically, this is a TTree with some add-ons. It is very similar to a
TNtuple, except that it requires using tables to fill it, and entries
are not forced to be floats. Here's how to use it...

First, one needs at least the following libraries loaded (as of Oct. 7, 1999):

     gSystem->Load("St_base");
     gSystem->Load("St_Tables");
     gSystem->Load("xdf2root");
     gSystem->Load("StUtilities");
     gSystem->Load("StAnalysisUtilities");

The constructor must be called with an St_Table-derived table.
Here for example, I'll use the St_tpt_track table.

     St_TableNtuple t1(St_tpt_track());

...or, if you already have a table of type St_tpt_track:

     St_tpt_track track1();
     ...
     St_TableNtuple t1(track1);

Now t1 is essentially an ntuple with columns as defined by the table
specified (IT IS NOT FILLED!). However, columns are not included
for table entries which are not numbers (int, short, long, float, etc
are allowed). Table entries which are arrays to begin with are spread out
into additional columns with names identical to the original table element
name with an index at the end (e.g. array element chisq[3] => chisq0,
chisq1, chisq2). Now you are ready to fill the ntuple, and there's two
ways to do it. If you have a specific table, just call:

     t1.Fill(track,firstRow,nRows);

Here, firstRow [default=0] is the first row you'd like to add from the
table, and nRows [default=-1] is the number of rows you'd like to add
(nRows<0 goes to end-of-table). If you just do Fill(track) it will
read the whole table.

If you have a root file with tables for many events, you can call:

     t1.AddTFile("filename","datasetname","tablename",firstEvent,nEvents);
...or
     TFile f("filename");
     t1.AddTFile(f,"datasetname","tablename",firstEvent,nEvents);

(AddXDFFile exists for adding tables from XDF files (class St_XDFFile).)

You can specify a certain number of events with nEvents [default=-1]
and a first event with firstEvent [default=1], or leave them
off and all the events on file will be added (nEvents < 0 goes to
end-of-file). An example with the tpt_track table would be:

     t1.AddTFile(f,"tpc_data","track");

If the dataset has the same name as the table, which is the case if the
table is all that is in the file, then you can leave off the table name:

     t1.AddTFile(f,"track");

Once filled, you can use t1 just like a regular TTree or TNtuple:

     t1.Draw("var1:var2","condition1 && condition2");
etc.

</pre>
</html>
