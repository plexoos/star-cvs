#cet(3/22/94)try at rsgi01.rhic.bnl.gov
#cet(3/8/94)#BASE_PATH=../13aug93
#whg(2/28/95)removed vxworks and lib stuff
#cet(24/8/95)compile on SunOS 5.4 (sirius) - HACKED!!
#
#CC=gcc
CPPFLAGS= $(patsubst %, -I%, $(HPATH))
#CFLAGS= -Wall
UN := $(shell uname -sr | sed -e 's/ //g' -e 's/\.//g' -e 's/OS5.*/OS5/' )
ifeq "$(UN)" "SunOS5"
LDFLAGS += -lnsl -lsocket
endif
vpath %.c $(SPATH)
vpath %.h $(HPATH)
vpath %.a $(LPATH)
#
LIB=libdsl.a
TESTOBJ=sample.o tcplib.o testjoin.o testlib.o testsort.o testtas.o
TESTLIB=libtestds.a
DSOBJ=testds.o tcptest.o
#DSOBJ=unixtape.o testds.o tcptest.o
DSPROGS=$(basename $(DSOBJ))
OBJ=$(TESTOBJ) $(DSOBJ) $(TCPOBJ)
#

all:		dstest

dstest:		$(DSPROGS)

$(DSPROGS):	$(TESTLIB) $(LIB)

test:
	@echo $(SPATH)
	@echo $(HPATH)
	@echo $(LPATH)
	@echo x$(ARCH)x
	@echo x$(SUN5)x
	@echo x$(LDFLAGS)x

$(TESTLIB):	$(TESTOBJ)
		ar r $@ $?
		-ranlib $@

$(OBJ) : dscodes.h dstype.h dsxdr.h sample.h xdrtape.h

clean:	
		-rm $(TESTLIB) $(OBJ) $(DSPROGS) *.bin *.txt

