********************************************************
*
* generic setup file to be executed at startup of gstar
*
* invoke via:
*
* > gstar -l setup.kumac
*
* (but make sure that e.g. setup.phys_on.year2.csh hasn't
* already set this as an alias for you!!)
*
* soft links should already have been created to set_phys and
* set_draw
*
* !! This file should not be changed !!
* 
* pmj 7/4/98
*
********************************************************

mess ********************************************************
mess ********************************************************
mess
mess running setup.kumac....
mess
mess ********************************************************
mess ********************************************************

*-------------------------------------------------------
* if used as login kumac, ~/.pawlogon.kumac doesn't get run,
* so do it here...

mess
mess +++++++++++++++++++++++++++++++++++++++++++++++

* NB $fexist onnly works on files in current dir (!!)
shell ln -s ~/.pawlogon.kumac test.pawlogon

if ( $fexist(test.pawlogon) ) then

   mess setup.kumac: running ~/.pawlogon.kumac
   exec ~/.pawlogon.kumac

else
   mess ~/.pawlogon.kumac not found

   shell ln -s $GSTAR_UTIL_DIR/generic.pawlogon.kumac temp.pawlogon.kumac
   exec temp.pawlogon.kumac
   shell \rm -f temp.pawlogon.kumac

endif

shell \rm -f test.pawlogon

mess +++++++++++++++++++++++++++++++++++++++++++++++
mess

*-------------------------------------------------------
mess
mess +++++++++++++++++++++++++++++++++++++++++++++++
mess  doing OS-specific setup

exec setup.os_specific.kumac
mess +++++++++++++++++++++++++++++++++++++++++++++++
mess
*-------------------------------------------------------
* get global from OS-dependent kumac

macro/global/import PLATFORM

*-------------------------------------------------------

shell \rm -f detm.rz

Root Geant
gdrop *
*-------------------------------------------------------
* set up physics switches
mess
mess +++++++++++++++++++++++++++++++++++++++++++++++
mess Physics switches: Loading file
shell \ls -l set_phys.kumac
exec set_phys
mess +++++++++++++++++++++++++++++++++++++++++++++++
mess 
*-------------------------------------------------------
mess
mess +++++++++++++++++++++++++++++++++++++++++++++++
mess Geometry switches: Loading file
shell \ls -l set_geom.kumac
exec set_geom
mess +++++++++++++++++++++++++++++++++++++++++++++++
mess
*---------------------------------------------------------

* make geometries

mess
mess +++++++++++++++++++++++++++++++++++++++++++++++
mess setup.kumac: load geometry

if [PLATFORM] = T3E then 

   mess loading geometry for T3E
   call geometry

else

  mess loading geometry for non-T3E
  make geometry

endif

mess +++++++++++++++++++++++++++++++++++++++++++++++
mess
*---------------------------------------------------------
if [PLATFORM] .ne. T3E then 

   mess
   mess ++++++++++++++++++++++++++++++++++++++++++++++

   mess setup.kumac: Dynamic loading of I/O modules...

   make sim/gstar

   mess ++++++++++++++++++++++++++++++++++++++++++++++
   mess

endif
*----------------------------------------------------------------------
* set some common STAR defaults (change these at your peril)
* 

if [PLATFORM] = T3E then
   subevent       200  | split each event into subevents of 200 tracks
   mess T3E: Split each event into subevents of 200 tracks
else
   mess Subevent splitting not active
endif

* save all secondaries that generate hits in inner detectors

Mode TRAC  SIMU 2
mode tpce simu 2
mode ftpc simu 2
mode svtt simu 2
mode btof simu 2

* for drawing tracks?? (not understood by pmj 8/4/98)
debug on
swit  2 3
swit  4 3
*----------------------------------------------------------------------
return




